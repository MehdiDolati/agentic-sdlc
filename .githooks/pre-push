#!/usr/bin/env bash
set -euo pipefail

# Run our fast local checks before push.
# Calls the PowerShell runner. Works on Windows (Git Bash) and Linux/macOS (pwsh).
ROOT="$(git rev-parse --show-toplevel)"
cd "$ROOT"

if command -v pwsh >/dev/null 2>&1; then
  pwsh -NoLogo -NoProfile -ExecutionPolicy Bypass -File "tools/local-lint-and-test.ps1"
elif command -v powershell.exe >/dev/null 2>&1; then
  powershell.exe -NoLogo -NoProfile -ExecutionPolicy Bypass -File "tools/local-lint-and-test.ps1"
else
  echo "PowerShell is required (pwsh or powershell.exe)."
  exit 1
fi