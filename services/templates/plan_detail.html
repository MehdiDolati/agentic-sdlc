 {% extends "base.html" %}
 {% block content %}
 <a href="/ui/plans">← All plans</a>
<h1>Plan</h1>
<div class="subhead">{{ plan["request"] }}</div>

 <div class="grid">
   <div class="card">
     <h2>PRD</h2>
     <div
       hx-get="/ui/plans/{{ plan['id'] }}/sections/prd"
       hx-trigger="load"
       hx-target="this"
       hx-swap="outerHTML">
       <div class="meta">Loading…</div>
     </div>
   </div>

  <div class="card">
    <h2>OpenAPI</h2>
    <div
      hx-get="/ui/plans/{{ plan['id'] }}/sections/openapi"
      hx-trigger="load"
      hx-target="this"
      hx-swap="outerHTML">
      <div class="meta">Loading…</div>
    </div>
  </div>

   {% if plan.get("artifacts") %}
     <div class="card">
       <h2>Artifacts</h2>
       <div class="meta">
         {% if plan["artifacts"].get("prd") %}<div>PRD: <code>{{ plan["artifacts"]["prd"] }}</code></div>{% endif %}
         {% if plan["artifacts"].get("openapi") %}<div>OpenAPI: <code>{{ plan["artifacts"]["openapi"] }}</code></div>{% endif %}
       </div>
     </div>
   {% else %}
     <div class="meta">No artifacts found yet.</div>
   {% endif %}
 </div>
 {% endblock %}
