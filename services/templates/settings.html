<!doctype html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>{{ title }}</title>
    <link rel="stylesheet" href="/static/site.css" />
  </head>
  <body>
    <div id="flash"></div>
    <h1>Settings</h1>
    {% if saved %}<div class="meta">Saved.</div>{% endif %}
    <form action="/ui/settings" method="post" style="margin-top:1rem">
      <div class="card">
        <h2>Planner</h2>
        <label>Mode</label>
        <select name="planner_mode">
          {% for m in modes %}
            <option value="{{ m }}" {% if cfg.planner_mode == m %}selected{% endif %}>{{ m }}</option>
          {% endfor %}
        </select>
        <label style="margin-left:1rem">Default Provider</label>
        <select name="default_provider">
          {% for p in providers %}
            <option value="{{ p }}" {% if cfg.default_provider == p %}selected{% endif %}>{{ p }}</option>
          {% endfor %}
        </select>
        <div style="margin-top:.5rem">
          <label>API Base URL</label>
          <input type="text" name="api_base_url" value="{{ cfg.api_base_url or '' }}" placeholder="https://api.example.com" />
        </div>
      </div>

      <div class="card" style="margin-top:1rem">
        <h2>Feature Toggles</h2>
        <label style="display:block; margin:.25rem 0">
          <input type="checkbox" name="auth_enabled" {% if cfg.auth_enabled %}checked{% endif %} />
          Authentication enabled
        </label>
        <label style="display:block; margin:.25rem 0">
          <input type="checkbox" name="multi_agent_enabled" {% if cfg.multi_agent_enabled %}checked{% endif %} />
          Multi-agent mode enabled
        </label>
      </div>
      <div class="card" style="margin-top:1rem">
        <h2>GitHub</h2>
        <div style="display:flex; gap:1rem; flex-wrap:wrap;">
          <div>
            <label>Repository</label><br/>
            <input type="text" name="github_repo" value="{{ cfg.github_repo or '' }}" placeholder="owner/repo"/>
          </div>
          <div>
            <label>Default Branch</label><br/>
            <input type="text" name="github_default_branch" value="{{ cfg.github_default_branch or 'main' }}" />
          </div>
        </div>
        <div style="margin-top:.5rem">
          <label>Token</label><br/>
          <input type="password" name="github_token" value="{{ '***' if cfg.github_token else '' }}" placeholder="ghp_..." />
          <div class="meta">Stored locally in settings.json. Leave blank to keep current.</div>
        </div>
      </div>
      <div style="margin-top:1rem">
        <button type="submit">Save</button>
      </div>
    </form>
  </body>
</html>
